"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4158],{8398:(s,n,e)=>{e.r(n),e.d(n,{assets:()=>d,contentTitle:()=>h,default:()=>j,frontMatter:()=>m,metadata:()=>a,moduleId:()=>x,toc:()=>o});const a=JSON.parse('{"id":"solutions/TVS2025/Mansion","title":"Mansion","description":"Tags: Greedy, Centroid Decompisition","source":"@site/docs/solutions/TVS2025/Mansion.mdx","sourceDirName":"solutions/TVS2025","slug":"/solutions/TVS2025/Mansion","permalink":"/SeaFarmers/docs/solutions/TVS2025/Mansion","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"LegendOfTheRoom","permalink":"/SeaFarmers/docs/solutions/TVS2025/LegendOfTheRoom"},"next":{"title":"MushroomKingdom","permalink":"/SeaFarmers/docs/solutions/TVS2025/MushroomKingdom"}}');var i=e(4848),t=e(8453),l=(e(6540),e(2407),e(8092)),c=e(8866),r=e(426);const m={},h="The Mansion Solution",d={},x="LearnToCode",o=[];function p(s){const n={annotation:"annotation",h1:"h1",header:"header",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msub:"msub",msup:"msup",p:"p",semantics:"semantics",span:"span",...(0,t.R)(),...s.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.A,{moduleId:x}),"\n",(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"the-mansion-solution",children:"The Mansion Solution"})}),"\n",(0,i.jsx)(n.p,{children:"Tags: Greedy, Centroid Decompisition"}),"\n",(0,i.jsx)(n.h1,{id:"subtask-with-randomness",children:"Subtask with randomness"}),"\n",(0,i.jsx)(n.p,{children:"If we arbitrarily root the tree, and try to cover the node with the greatest depth that isn't already covered,\nit is always best for up to cover the node that is highest up in the tree that is also in range of that node.\nIt can be shown that this node will cover all nodes a node lower would cover and possible more."}),"\n",(0,i.jsxs)(n.p,{children:["We can naively simulate this in ",(0,i.jsxs)(n.span,{className:"katex",children:[(0,i.jsx)(n.span,{className:"katex-mathml",children:(0,i.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(n.semantics,{children:[(0,i.jsxs)(n.mrow,{children:[(0,i.jsx)(n.mi,{mathvariant:"script",children:"O"}),(0,i.jsx)(n.mo,{stretchy:"false",children:"("}),(0,i.jsxs)(n.msup,{children:[(0,i.jsx)(n.mi,{children:"n"}),(0,i.jsx)(n.mn,{children:"2"})]}),(0,i.jsx)(n.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(n.annotation,{encoding:"application/x-tex",children:"\\mathcal{O}(n^2)"})]})})}),(0,i.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"1.0641em",verticalAlign:"-0.25em"}}),(0,i.jsx)(n.span,{className:"mord mathcal",style:{marginRight:"0.02778em"},children:"O"}),(0,i.jsx)(n.span,{className:"mopen",children:"("}),(0,i.jsxs)(n.span,{className:"mord",children:[(0,i.jsx)(n.span,{className:"mord mathnormal",children:"n"}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsx)(n.span,{className:"vlist-t",children:(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.8141em"},children:(0,i.jsxs)(n.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(n.span,{className:"mord mtight",children:"2"})})]})})})})})]}),(0,i.jsx)(n.span,{className:"mclose",children:")"})]})})]}),", but in reality, this runs in ",(0,i.jsxs)(n.span,{className:"katex",children:[(0,i.jsx)(n.span,{className:"katex-mathml",children:(0,i.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(n.semantics,{children:[(0,i.jsxs)(n.mrow,{children:[(0,i.jsx)(n.mi,{mathvariant:"script",children:"O"}),(0,i.jsx)(n.mo,{stretchy:"false",children:"("}),(0,i.jsx)(n.mi,{children:"C"}),(0,i.jsx)(n.mo,{children:"\u2217"}),(0,i.jsx)(n.mi,{children:"R"}),(0,i.jsx)(n.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(n.annotation,{encoding:"application/x-tex",children:"\\mathcal{O}(C * R)"})]})})}),(0,i.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(n.span,{className:"mord mathcal",style:{marginRight:"0.02778em"},children:"O"}),(0,i.jsx)(n.span,{className:"mopen",children:"("}),(0,i.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(n.span,{className:"mbin",children:"\u2217"}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,i.jsx)(n.span,{className:"mclose",children:")"})]})]})]}),"\nwhere ",(0,i.jsxs)(n.span,{className:"katex",children:[(0,i.jsx)(n.span,{className:"katex-mathml",children:(0,i.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(n.semantics,{children:[(0,i.jsx)(n.mrow,{children:(0,i.jsx)(n.mi,{children:"C"})}),(0,i.jsx)(n.annotation,{encoding:"application/x-tex",children:"C"})]})})}),(0,i.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"0.6833em"}}),(0,i.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"})]})})]})," is the answer."]}),"\n",(0,i.jsx)(n.h1,{id:"naive-implementation",children:"Naive Implementation"}),"\n",(0,i.jsx)("div",{style:{transform:"translateX(150px)"},children:(0,i.jsx)(c.A,{language:"cpp",style:r.A,children:"#include <cmath>\n#include <cstdio>\n#include <vector>\n#include <algorithm>\n#include <map>\nusing namespace std;\n\nint n, k; \nstring z; \nvector<vector<int>> a; \nvector<int> d;\nvector<bool> b;  \nint comp(int x, int y) {\n  if(x == -1 || y == -1) return x != -1 ? x : y; \n  if(d[x] < d[y]) return x; \n  return y; \n}\nvoid get_D(int x = 0, int y = -1) {\n  for(auto &u : a[x]) {\n      if(u == y) continue; \n      d[u] = d[x] + 1; \n      get_D(u, x); \n  }\n}\nint find(int x, int y = -1, int dis = 0) {\n  if(dis > k) return -1; \n  int ret = -1; \n  if(z[x] == '0') ret = x; \n  for(auto &u : a[x]) {\n      if(u == y) continue; \n      ret = comp(ret, find(u, x, dis + 1)); \n  }\n  return ret; \n}\nvoid place(int x, int y = -1, int dis = 0) {\n  if(dis > k) return; \n  b[x] = true; \n  for(auto &u : a[x]) {\n      if(u == y) continue; \n      place(u, x, dis + 1); \n  }\n}\n\n\nint main() {\n  cin >> n >> k >> z; \n  a = vector<vector<int>>(n); \n  d = vector<int>(n, 0); \n  b = vector<bool>(n, false); \n  for(int i = 0; i < n - 1; i++) {\n      int x, y; \n      cin >> x >> y;\n      x--, y--; \n      a[x].push_back(y), a[y].push_back(x); \n  }\n  get_D(); \n  vector<int> o; \n  for(int i = 0; i < n; i++) o.push_back(i); \n  sort(o.begin(), o.end(), [](auto x, auto y){ return d[x] > d[y]; }); \n  int an = 0;\n  for(auto &u : o) {\n      if(!b[u]) {\n          int bes = find(u); \n          if(bes == -1) { cout << -1 << endl; return 0; }\n          an++; \n          place(bes); \n      }\n  }\n  cout << an << endl;\n}\n"})}),"\n",(0,i.jsx)(n.h1,{id:"full-solution",children:"Full Solution"}),"\n",(0,i.jsx)(n.p,{children:"We can use Centroid Decompisition to support the following:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.span,{className:"katex",children:[(0,i.jsx)(n.span,{className:"katex-mathml",children:(0,i.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(n.semantics,{children:[(0,i.jsx)(n.mrow,{children:(0,i.jsx)(n.mn,{children:"1"})}),(0,i.jsx)(n.annotation,{encoding:"application/x-tex",children:"1"})]})})}),(0,i.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"0.6444em"}}),(0,i.jsx)(n.span,{className:"mord",children:"1"})]})})]})," Cover a node in ",(0,i.jsxs)(n.span,{className:"katex",children:[(0,i.jsx)(n.span,{className:"katex-mathml",children:(0,i.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(n.semantics,{children:[(0,i.jsxs)(n.mrow,{children:[(0,i.jsx)(n.mi,{mathvariant:"script",children:"O"}),(0,i.jsx)(n.mo,{stretchy:"false",children:"("}),(0,i.jsxs)(n.msub,{children:[(0,i.jsxs)(n.mrow,{children:[(0,i.jsx)(n.mi,{children:"log"}),(0,i.jsx)(n.mo,{children:"\u2061"})]}),(0,i.jsx)(n.mn,{children:"2"})]}),(0,i.jsx)(n.mo,{stretchy:"false",children:"("}),(0,i.jsx)(n.mi,{children:"n"}),(0,i.jsx)(n.mo,{stretchy:"false",children:")"}),(0,i.jsx)(n.mo,{children:"\u2217"}),(0,i.jsx)(n.mi,{children:"n"}),(0,i.jsx)(n.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(n.annotation,{encoding:"application/x-tex",children:"\\mathcal{O}(\\log_2(n)*n)"})]})})}),(0,i.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(n.span,{className:"mord mathcal",style:{marginRight:"0.02778em"},children:"O"}),(0,i.jsx)(n.span,{className:"mopen",children:"("}),(0,i.jsxs)(n.span,{className:"mop",children:[(0,i.jsxs)(n.span,{className:"mop",children:["lo",(0,i.jsx)(n.span,{style:{marginRight:"0.01389em"},children:"g"})]}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.207em"},children:(0,i.jsxs)(n.span,{style:{top:"-2.4559em",marginRight:"0.05em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(n.span,{className:"mord mtight",children:"2"})})]})}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.2441em"},children:(0,i.jsx)(n.span,{})})})]})})]}),(0,i.jsx)(n.span,{className:"mopen",children:"("}),(0,i.jsx)(n.span,{className:"mord mathnormal",children:"n"}),(0,i.jsx)(n.span,{className:"mclose",children:")"}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(n.span,{className:"mbin",children:"\u2217"}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(n.span,{className:"mord mathnormal",children:"n"}),(0,i.jsx)(n.span,{className:"mclose",children:")"})]})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.span,{className:"katex",children:[(0,i.jsx)(n.span,{className:"katex-mathml",children:(0,i.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(n.semantics,{children:[(0,i.jsx)(n.mrow,{children:(0,i.jsx)(n.mn,{children:"2"})}),(0,i.jsx)(n.annotation,{encoding:"application/x-tex",children:"2"})]})})}),(0,i.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"0.6444em"}}),(0,i.jsx)(n.span,{className:"mord",children:"2"})]})})]})," Find closest node in ",(0,i.jsxs)(n.span,{className:"katex",children:[(0,i.jsx)(n.span,{className:"katex-mathml",children:(0,i.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(n.semantics,{children:[(0,i.jsxs)(n.mrow,{children:[(0,i.jsx)(n.mi,{mathvariant:"script",children:"O"}),(0,i.jsx)(n.mo,{stretchy:"false",children:"("}),(0,i.jsxs)(n.msub,{children:[(0,i.jsxs)(n.mrow,{children:[(0,i.jsx)(n.mi,{children:"log"}),(0,i.jsx)(n.mo,{children:"\u2061"})]}),(0,i.jsx)(n.mn,{children:"2"})]}),(0,i.jsx)(n.mo,{stretchy:"false",children:"("}),(0,i.jsx)(n.mi,{children:"n"}),(0,i.jsx)(n.mo,{stretchy:"false",children:")"}),(0,i.jsx)(n.mo,{children:"\u2217"}),(0,i.jsx)(n.mi,{children:"n"}),(0,i.jsx)(n.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(n.annotation,{encoding:"application/x-tex",children:"\\mathcal{O}(\\log_2(n)*n)"})]})})}),(0,i.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(n.span,{className:"mord mathcal",style:{marginRight:"0.02778em"},children:"O"}),(0,i.jsx)(n.span,{className:"mopen",children:"("}),(0,i.jsxs)(n.span,{className:"mop",children:[(0,i.jsxs)(n.span,{className:"mop",children:["lo",(0,i.jsx)(n.span,{style:{marginRight:"0.01389em"},children:"g"})]}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.207em"},children:(0,i.jsxs)(n.span,{style:{top:"-2.4559em",marginRight:"0.05em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(n.span,{className:"mord mtight",children:"2"})})]})}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.2441em"},children:(0,i.jsx)(n.span,{})})})]})})]}),(0,i.jsx)(n.span,{className:"mopen",children:"("}),(0,i.jsx)(n.span,{className:"mord mathnormal",children:"n"}),(0,i.jsx)(n.span,{className:"mclose",children:")"}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(n.span,{className:"mbin",children:"\u2217"}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(n.span,{className:"mord mathnormal",children:"n"}),(0,i.jsx)(n.span,{className:"mclose",children:")"})]})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsxs)(n.span,{className:"katex",children:[(0,i.jsx)(n.span,{className:"katex-mathml",children:(0,i.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(n.semantics,{children:[(0,i.jsx)(n.mrow,{children:(0,i.jsx)(n.mn,{children:"3"})}),(0,i.jsx)(n.annotation,{encoding:"application/x-tex",children:"3"})]})})}),(0,i.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"0.6444em"}}),(0,i.jsx)(n.span,{className:"mord",children:"3"})]})})]})," Find best node to cover for each node in ",(0,i.jsxs)(n.span,{className:"katex",children:[(0,i.jsx)(n.span,{className:"katex-mathml",children:(0,i.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(n.semantics,{children:[(0,i.jsxs)(n.mrow,{children:[(0,i.jsx)(n.mi,{mathvariant:"script",children:"O"}),(0,i.jsx)(n.mo,{stretchy:"false",children:"("}),(0,i.jsxs)(n.msub,{children:[(0,i.jsxs)(n.mrow,{children:[(0,i.jsx)(n.mi,{children:"log"}),(0,i.jsx)(n.mo,{children:"\u2061"})]}),(0,i.jsx)(n.mn,{children:"2"})]}),(0,i.jsx)(n.mo,{stretchy:"false",children:"("}),(0,i.jsx)(n.mi,{children:"n"}),(0,i.jsx)(n.mo,{stretchy:"false",children:")"}),(0,i.jsx)(n.mo,{children:"\u2217"}),(0,i.jsx)(n.mi,{children:"n"}),(0,i.jsx)(n.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(n.annotation,{encoding:"application/x-tex",children:"\\mathcal{O}(\\log_2(n)*n)"})]})})}),(0,i.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(n.span,{className:"mord mathcal",style:{marginRight:"0.02778em"},children:"O"}),(0,i.jsx)(n.span,{className:"mopen",children:"("}),(0,i.jsxs)(n.span,{className:"mop",children:[(0,i.jsxs)(n.span,{className:"mop",children:["lo",(0,i.jsx)(n.span,{style:{marginRight:"0.01389em"},children:"g"})]}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.207em"},children:(0,i.jsxs)(n.span,{style:{top:"-2.4559em",marginRight:"0.05em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(n.span,{className:"mord mtight",children:"2"})})]})}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.2441em"},children:(0,i.jsx)(n.span,{})})})]})})]}),(0,i.jsx)(n.span,{className:"mopen",children:"("}),(0,i.jsx)(n.span,{className:"mord mathnormal",children:"n"}),(0,i.jsx)(n.span,{className:"mclose",children:")"}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(n.span,{className:"mbin",children:"\u2217"}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(n.span,{className:"mord mathnormal",children:"n"}),(0,i.jsx)(n.span,{className:"mclose",children:")"})]})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["This runs in ",(0,i.jsxs)(n.span,{className:"katex",children:[(0,i.jsx)(n.span,{className:"katex-mathml",children:(0,i.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(n.semantics,{children:[(0,i.jsxs)(n.mrow,{children:[(0,i.jsx)(n.mi,{mathvariant:"script",children:"O"}),(0,i.jsx)(n.mo,{stretchy:"false",children:"("}),(0,i.jsxs)(n.msub,{children:[(0,i.jsxs)(n.mrow,{children:[(0,i.jsx)(n.mi,{children:"log"}),(0,i.jsx)(n.mo,{children:"\u2061"})]}),(0,i.jsx)(n.mn,{children:"2"})]}),(0,i.jsx)(n.mo,{stretchy:"false",children:"("}),(0,i.jsx)(n.mi,{children:"n"}),(0,i.jsx)(n.mo,{stretchy:"false",children:")"}),(0,i.jsx)(n.mo,{children:"\u2217"}),(0,i.jsx)(n.mi,{children:"n"}),(0,i.jsx)(n.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(n.annotation,{encoding:"application/x-tex",children:"\\mathcal{O}(\\log_2(n)*n)"})]})})}),(0,i.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(n.span,{className:"mord mathcal",style:{marginRight:"0.02778em"},children:"O"}),(0,i.jsx)(n.span,{className:"mopen",children:"("}),(0,i.jsxs)(n.span,{className:"mop",children:[(0,i.jsxs)(n.span,{className:"mop",children:["lo",(0,i.jsx)(n.span,{style:{marginRight:"0.01389em"},children:"g"})]}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.207em"},children:(0,i.jsxs)(n.span,{style:{top:"-2.4559em",marginRight:"0.05em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(n.span,{className:"mord mtight",children:"2"})})]})}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.2441em"},children:(0,i.jsx)(n.span,{})})})]})})]}),(0,i.jsx)(n.span,{className:"mopen",children:"("}),(0,i.jsx)(n.span,{className:"mord mathnormal",children:"n"}),(0,i.jsx)(n.span,{className:"mclose",children:")"}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(n.span,{className:"mbin",children:"\u2217"}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,i.jsx)(n.span,{className:"mord mathnormal",children:"n"}),(0,i.jsx)(n.span,{className:"mclose",children:")"})]})]})]})]}),"\n",(0,i.jsx)(n.h1,{id:"implementation",children:"Implementation"}),"\n",(0,i.jsx)("div",{style:{transform:"translateX(150px)"},children:(0,i.jsx)(c.A,{language:"cpp",style:r.A,children:"#include <cmath>\n#include <cstdio>\n#include <vector>\n#include <iostream> \n#include <algorithm>\n#include <map>\nusing namespace std;\n\nint n, k, dep; \nstring z; \nvector<vector<int>> a; \nvector<int> d, sz, f, v, bes;\nvector<bool> seen; \nvector<vector<pair<int, int>>> e; \nint comp(int x, int y) {\n  if(x == -1 || y == -1) return x != -1 ? x : y; \n  if(d[x] < d[y]) return x; \n  return y; \n}\nvoid get_D(int x = 0, int y = -1) {\n  for(auto &u : a[x]) {\n      if(u == y) continue; \n      d[u] = d[x] + 1; \n      get_D(u, x); \n  }\n}\nint get_SZ(int x, int y = -1) {\n  sz[x] = 1; \n  for(auto &u : a[x]) {\n      if(u == y || seen[u]) continue; \n      sz[x] += get_SZ(u, x); \n  }\n  return sz[x]; \n}\nint get_C(int x, int tot, int y = -1) {\n  for(auto &u : a[x]) {\n      if(u == y || seen[u]) continue; \n      if(sz[u] * 2 > tot) get_C(u, tot, x); \n  }\n  return x; \n}\nvoid get_BES(int c, int x, int y = -1, int dis = 0) {\n  if(z[x] == '0') bes[dis] = comp(bes[dis], x); \n  dep = max(dep, dis); \n  e[x].push_back({c, dis}); \n  for(auto &u : a[x]) {\n      if(u == y || seen[u]) continue; \n      get_BES(c, u, x, dis + 1); \n  }\n}\nvoid get_F(int x, int y = -1, int dis = 0) {\n  if(k - dis < 0) return; \n  f[x] = comp(f[x], bes[min(k - dis, dep)]); \n  for(auto &u : a[x]) {\n      if(u == y || seen[u]) continue; \n      get_F(u, x, dis + 1); \n  }\n}\nvoid go(int x = 0, int y = -1) {\n  x = get_C(x, get_SZ(x)); \n  dep = 0; \n  get_BES(x, x); \n  for(int i = 0; i < dep; i++) bes[i + 1] = comp(bes[i + 1], bes[i]); \n  get_F(x); \n  for(int i = 0; i <= dep; i++) bes[i] = -1; \n  seen[x] = true; \n  for(auto &u : a[x]) if(!seen[u]) go(u); \n}\nint find(int x) {\n  int ret = k + 1; \n  for(auto &u : e[x]) ret = min(ret, v[u.first] + u.second); \n  return ret; \n}\nvoid place(int x, int y = -1, int dis = 0) {\n  for(auto &u : e[x]) v[u.first] = min(v[u.first], u.second); \n}\nint main() {\n  cin >> n >> k >> z; \n  e = vector<vector<pair<int, int>>>(n); \n  a = vector<vector<int>>(n); \n  d = sz = vector<int>(n, 0); \n  f = bes = vector<int>(n, -1); \n  v = vector<int>(n, k + 1); \n  seen = vector<bool>(n, false); \n  for(int i = 0; i < n - 1; i++) {\n      int x, y; \n      cin >> x >> y;\n      x--, y--; \n      a[x].push_back(y), a[y].push_back(x); \n  }\n  get_D(); \n  go(); \n  vector<int> o; \n  for(int i = 0; i < n; i++) o.push_back(i); \n  sort(o.begin(), o.end(), [](auto x, auto y){ return d[x] > d[y]; });\n  int an = 0;\n  for(auto &u : o) {\n      if(find(u) > k) {\n          if(f[u] == -1) { cout << -1 << endl; return 0; }\n          an++; \n          place(f[u]); \n      }\n  }\n  cout << an << endl;\n}\n\n\n"})})]})}function j(s={}){const{wrapper:n}={...(0,t.R)(),...s.components};return n?(0,i.jsx)(n,{...s,children:(0,i.jsx)(p,{...s})}):p(s)}}}]);